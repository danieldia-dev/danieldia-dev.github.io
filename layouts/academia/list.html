{{/* layouts/academia/list.html */}}
{{ define "main" }}
    <div class="space-y-16">
        {{/* Fetch all content of type "academia" */}}
        {{ $allPages := where .Site.RegularPages "Type" "academia" }}

        <!-- 1. Talks & Workshops Section -->
        <section id="talks-list">
            <h2 class="text-3xl font-bold text-center text-custom-red-500 mb-8">Talks & Workshops</h2>
            {{ $talks := where $allPages ".Params.category" "Talk" }}
            {{ if gt (len $talks) 0 }}
                <div class="space-y-8 max-w-3xl mx-auto">
                    {{ range $talks.ByDate.Reverse }}
                        {{/* We can reuse the publication card for this */}}
                        {{ partial "publication-card.html" . }}
                    {{ end }}
                </div>
            {{ else }}
                <p class="text-center text-custom-gray-600">No talks or workshops listed yet.</p>
            {{ end }}
        </section>

        <hr class="custom-divider max-w-4xl mx-auto"/>

        <!-- 2. Conferences Section -->
        <section id="conferences-list">
            <h2 class="text-3xl font-bold text-center text-custom-red-500 mb-8">Conferences</h2>
            {{ $conferences := where $allPages ".Params.category" "Conference" }}
            {{ if gt (len $conferences) 0 }}
                <div class="space-y-8 max-w-3xl mx-auto">
                    {{ range $conferences.ByDate.Reverse }}
                        {{ partial "publication-card.html" . }}
                    {{ end }}
                </div>
            {{ else }}
                <p class="text-center text-custom-gray-600">No conferences listed yet.</p>
            {{ end }}
        </section>

        <hr class="custom-divider max-w-4xl mx-auto"/>

        <!-- 3. Publications Section -->
        <section id="publications-list">
            <h2 class="text-3xl font-bold text-center text-custom-red-500 mb-8">Publications</h2>
            {{ $publications := where $allPages ".Params.category" "Publication" }}
            {{ if gt (len $publications) 0 }}
                <div class="space-y-8 max-w-3xl mx-auto">
                    {{ range $publications.ByDate.Reverse }}
                        {{ partial "publication-card.html" . }}
                    {{ end }}
                </div>
            {{ else }}
                <p class="text-center text-custom-gray-600">No publications listed yet.</p>
            {{ end }}
        </section>

        <hr class="custom-divider max-w-4xl mx-auto"/>

        <!-- 4. Open-Source Contributions Section -->
        <section id="os-contributions-list">
            <h2 class="text-3xl font-bold text-center text-custom-red-500 mb-8">Open-Source Contributions</h2>
            {{ $contributions := where $allPages ".Params.category" "Open-Source" }}
            {{ if gt (len $contributions) 0 }}
                <div class="grid md:grid-cols-2 gap-6 md:gap-8">
                    {{ range $contributions.ByDate.Reverse }}
                        {{/* We use the portfolio card for contributions */}}
                        {{ partial "portfolio-card.html" . }}
                    {{ end }}
                </div>
            {{ else }}
                <p class="text-center text-custom-gray-600">No open-source contributions listed yet.</p>
            {{ end }}
        </section>

    </div>
{{ end }}
